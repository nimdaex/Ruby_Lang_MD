บทความนี้อธิบายโครงสร้างพื้นฐานของภาษา Ruby โดยใช้สไตล์ภาษาไทยแบบอธิบายละเอียดสำหรับผู้อ่านที่เริ่มต้นและต้องการเห็นภาพจากตัวอย่างโค้ดหลายรูปแบบ โดยเนื้อหาจะเดินไปทีละส่วนตั้งแต่โปรแกรมแรก, statement, expression, comment, literals, การเว้นวรรค ไปจนถึง keyword ที่ภาษาสงวนไว้ให้ใช้กับตัวแปลภาษาของ Ruby เท่านั้น[1]

## ทำความรู้จักโครงสร้างภาษา Ruby

เมื่อเริ่มเรียนภาษาโปรแกรมใดๆ สิ่งสำคัญอย่างแรกคือการเข้าใจโครงสร้างและไวยากรณ์ของภาษาให้ชัดเจน ก่อนจะค่อยไปสนใจรายละเอียดเชิงลึกอื่นๆ เช่น ไลบรารีหรือเฟรมเวิร์กต่างๆ  ภาษา Ruby จัดอยู่ในกลุ่มภาษาระดับสูงที่ออกแบบมาให้โค้ดอ่านง่าย คล้ายภาษามนุษย์ และลดสิ่งที่ไม่จำเป็นออกไป ทำให้ผู้เขียนโค้ดสามารถโฟกัสกับ “ตรรกะของโปรแกรม” มากกว่ารายละเอียดเชิงเทคนิคจุกจิก[1]

แนวคิดสำคัญของโครงสร้างภาษา Ruby คือ ทุกอย่างถูกเขียนด้วยชุดของคำสั่ง (statements) และนิพจน์ (expressions) ที่ทำงานกับตัวแปรและค่าคงที่ โดยใช้ตัวดำเนินการและเมธอดต่างๆ เพื่อให้ได้ผลลัพธ์ตามที่โปรแกรมเมอร์ออกแบบ  ในบทความนี้จะพาไล่ดูตั้งแต่โปรแกรมแรกไปจนถึงรายละเอียดเรื่องคอมเมนต์, literals, การจัดรูปแบบโค้ด และคำสงวน (keywords) ของภาษา Ruby[1]

## โปรแกรมแรกในภาษา Ruby

จุดเริ่มต้นยอดนิยมของการเรียนภาษาโปรแกรมคือการเขียนโปรแกรมที่พิมพ์ข้อความง่ายๆ ออกมาทางหน้าจอ เพื่อให้เห็นภาพว่า “เขียนอะไร แล้วมันทำงานอย่างไร”  ในภาษา Ruby สามารถเขียนโปรแกรมแรกให้แสดงข้อความทักทาย เช่น “สวัสดี Ruby!” ด้วยเมธอดมาตรฐานสำหรับการแสดงผลข้อความ[1]

ตัวอย่างโปรแกรมแรก:

```ruby
greeting.rb

puts "สวัสดี Ruby!"
```

ในตัวอย่างนี้ `puts` เป็นเมธอดที่ใช้สำหรับส่งข้อความไปแสดงบนช่องทางมาตรฐานในการแสดงผล (standard output) ซึ่งในที่นี้คือหน้าจอเทอร์มินัลหรือคอนโซลของคุณ  โดยทั่วไปแล้วไฟล์โปรแกรม Ruby จะใช้นามสกุล `.rb` เสมอ และหลังจากบันทึกไฟล์แล้วสามารถรันโปรแกรมได้โดยใช้คำสั่งในบรรทัดคำสั่งดังนี้[1]

```bash
ruby greeting.rb
```

เมื่อรันโปรแกรม จะเห็นข้อความ `สวัสดี Ruby!` ปรากฏขึ้นบนหน้าจอทันที แนะนำให้ลองเปลี่ยนข้อความภายในเครื่องหมายอัญประกาศ เช่น เปลี่ยนเป็นชื่อของคุณเอง หรือข้อความอื่นๆ เพื่อสังเกตว่าผลลัพธ์ที่ได้บนหน้าจอเปลี่ยนไปอย่างไร[1]

## Statements: คำสั่งในโปรแกรม Ruby

คำว่า statement ในภาษาโปรแกรม หมายถึง “คำสั่งหนึ่งชุด” ที่บอกให้โปรแกรมทำบางสิ่งบางอย่าง เช่น การคำนวณ, การกำหนดค่าให้ตัวแปร หรือการแสดงผล  หนึ่งโปรแกรมอาจมีตั้งแต่คำสั่งเดียวจนถึงหลายร้อยหรือหลายพันคำสั่งที่ทำงานต่อเนื่องกันเพื่อให้บรรลุวัตถุประสงค์ที่ตั้งไว้[1]

ลองดูตัวอย่างโค้ดที่มีหลาย statement ดังนี้:

```ruby
total_items = 2 * 7
user_name   = "developer_th"

puts user_name
puts total_items
```

ในตัวอย่างนี้มี 4 คำสั่ง คือ การกำหนดค่าตัวแปรสองบรรทัดแรก และการแสดงผลตัวแปรสองบรรทัดถัดมา  ภาษา Ruby ใช้ “การขึ้นบรรทัดใหม่” เป็นตัวแบ่งแยกแต่ละคำสั่งออกจากกัน ทำให้โค้ดอ่านเข้าใจง่ายและเห็นขอบเขตของคำสั่งแต่ละบรรทัดชัดเจน[1]

Ruby ยังอนุญาตให้เขียนหลายคำสั่งอยู่ในบรรทัดเดียวกันได้ โดยใช้เครื่องหมาย semicolon (`;`) คั่นระหว่างคำสั่ง เช่น[1]

```ruby
total_items = 2 * 7; user_name = "developer_th"; puts user_name; puts total_items
```

โค้ดบรรทัดเดียวยาวๆ นี้ให้ผลลัพธ์แบบเดียวกับตัวอย่างที่จัดบรรทัดให้เรียบร้อยก่อนหน้า แต่โดยแนวปฏิบัติแล้วมักแนะนำให้ใช้รูปแบบ “หนึ่งบรรทัดต่อหนึ่งคำสั่ง” เพื่อความเป็นระเบียบและการอ่านเข้าใจง่าย โดยเฉพาะเมื่อต้องทำงานร่วมกับผู้อื่นในโครงการขนาดใหญ่[1]

## Expression: นิพจน์ที่ให้ค่าผลลัพธ์

Expression คือการผสมผสานกันของค่าคงที่ ตัวแปร ตัวดำเนินการ และเมธอดหรือฟังก์ชัน เพื่อทำให้เกิดการคำนวณและให้ค่าผลลัพธ์ออกมา  แนวคิดนี้คล้ายกับนิพจน์ทางคณิตศาสตร์ เช่น \(3 + 5\) หรือ \((10 / 2) * 6\) แต่ในภาษาโปรแกรมสามารถรวมไปถึงข้อความ, การเปรียบเทียบ, และการดำเนินการกับประเภทข้อมูลอื่นๆ[1]

ตัวอย่าง expression แบบต่างๆ:

```ruby
p -9
p 4 + 11
p (12 / 3) * 5
p 10 != 3
p "Ruby " * 3
p "dev" + "eloper"
```

ในตัวอย่างนี้ expression แต่ละบรรทัดใช้ค่าคงที่หรือตัวดำเนินการแตกต่างกัน และเมธอด `p` จะใช้สำหรับแสดงค่าผลลัพธ์ของ expression นั้นๆ ออกมาพร้อมรูปแบบที่ชัดเจน  ทุก expression ในภาษา Ruby จะให้ค่าบางอย่างกลับมา ซึ่งสามารถนำไปใช้ต่อในการคำนวณรอบใหม่ หรือเก็บลงในตัวแปรเพื่อใช้งานในภายหลังได้[1]

ตัวอย่างการนำ expression มาทำงานร่วมกับตัวแปร:

```ruby
x = 12
y = 5

# กลุ่มแรก: ใช้ค่าในตัวแปรโดยตรง
p x + y
p x - y

# กลุ่มสอง: สร้าง expression ซับซ้อนแล้วเก็บในตัวแปร
m = x * y
n = (x + y) * (x - y)

p m
p n
```

สองบรรทัดแรกใช้ตัวแปร `x` และ `y` ใน expression อย่างง่าย เช่น การบวกและลบ แล้วส่งผลลัพธ์ไปแสดงผ่าน `p`  ในขณะที่กลุ่มที่สองสร้าง expression ที่ซับซ้อนมากขึ้น เก็บผลลัพธ์ลงในตัวแปร `m` และ `n` ก่อน แล้วค่อยแสดงค่าทีหลัง เพื่อให้โค้ดอ่านง่ายและแยกส่วนการคำนวณออกจากส่วนการแสดงผล[1]

## Comments: คำอธิบายโค้ด

คอมเมนต์คือส่วนของซอร์สโค้ดที่เขียนขึ้นเพื่ออธิบายว่าโค้ดส่วนนั้นทำงานอย่างไร หรือใช้เพื่อให้คำอธิบายกับผู้อ่านโค้ดในอนาคต โดยคอมไพเลอร์หรือตัวแปลภาษาจะเพิกเฉยต่อข้อความในคอมเมนต์ ไม่ได้นำมาคำนวณหรือรันใดๆ  การใช้คอมเมนต์อย่างเหมาะสมช่วยให้จัดการโปรแกรมขนาดใหญ่หรือโค้ดที่ทำงานร่วมกับผู้อื่นได้ง่ายขึ้นมาก[1]

Ruby รองรับคอมเมนต์สองรูปแบบหลัก คือ คอมเมนต์แบบหนึ่งบรรทัด และคอมเมนต์แบบหลายบรรทัด[1]

ตัวอย่างคอมเมนต์แบบหนึ่งบรรทัด:

```ruby
# initialize configuration values
app_name = "InventorySystem"
launch_year = 2022   # the year this app was launched

# display a message to the screen
puts app_name + " started in " + launch_year.to_s
```

ในตัวอย่างนี้ เครื่องหมาย `#` จะบอก Ruby ว่าส่วนที่เหลือหลังจากนั้นในบรรทัดเดียวกันเป็นคอมเมนต์ ทั้งในบรรทัดเดี่ยวและคอมเมนต์ที่ต่อท้ายโค้ดส่วนอื่น  ข้อความทั้งหมดหลัง `#` จะถูกเพิกเฉยและไม่มีผลใดๆ ต่อการทำงานของโปรแกรม[1]

ตัวอย่างคอมเมนต์แบบหลายบรรทัด:

```ruby
=begin
This program asks the user for a project name
and then prints a confirmation message to the screen.
You can extend it later to save data into a database.
=end

# ask for project name
print "Project name?: "
project = gets.chomp

# show confirmation
puts "Project \"" + project + "\" has been created."
```

ส่วนที่อยู่ระหว่าง `=begin` และ `=end` จะถือเป็นคอมเมนต์หลายบรรทัด โดยที่สองคำสั่งนี้จะต้องอยู่บนบรรทัดของตัวเองเสมอ  รูปแบบนี้สะดวกสำหรับอธิบายโปรแกรมยาวๆ หรือสำหรับซ่อนโค้ดจำนวนมากชั่วคราวในระหว่างการทดลองแก้ไขหรือดีบัก[1]

ในโค้ดตัวอย่างยังมีการใช้ `gets.chomp` เพื่อรับค่าที่ผู้ใช้พิมพ์เข้ามาจากคอนโซล และใช้ `print` เพื่อแสดงข้อความโดยไม่ขึ้นบรรทัดใหม่ ต่างจาก `puts` ที่จะขึ้นบรรทัดใหม่ให้โดยอัตโนมัติหลังจบข้อความ[1]

## Literals: ค่าคงที่ในโค้ด

Literals คือค่าคงที่ที่เขียนอยู่ในโค้ดโดยตรง เช่น ตัวเลข, ข้อความ, ค่า boolean หรือ symbol ต่างๆ  ค่าพวกนี้มักถูกนำไปใช้กำหนดค่าให้กับตัวแปร หรือใช้เพื่อเปรียบเทียบหรือคำนวณภายใน expression ของโปรแกรม[1]

ตัวอย่าง literals แบบต่างๆ ใน Ruby:

```ruby
# Literals
false
42
3.14
"Bangkok"
:status

# Assign literals to variables
is_active  = false
quantity   = 42
pi_value   = 3.14
city_name  = "Bangkok"
state_key  = :status
```

ในตัวอย่างนี้ `false` เป็น literal ของ boolean, `42` และ `3.14` เป็น literal ของตัวเลขจำนวนเต็มและจำนวนจริงตามลำดับ  `"Bangkok"` เป็น literal ของสตริง และ `:status` เป็น literal ของ symbol ซึ่งใน Ruby จะเริ่มต้นด้วยเครื่องหมายโคลอน (`:`) เพื่อสร้างค่า symbol ที่มีคุณสมบัติคล้ายชื่อคงที่และใช้เปรียบเทียบหรือเป็นคีย์ในโครงสร้างข้อมูลได้อย่างมีประสิทธิภาพ[1]

## การจัดวรรคและช่องว่างในโค้ด

การเว้นวรรคและการจัดรูปแบบโค้ดไม่ได้มีผลต่อผลลัพธ์ของโปรแกรมโดยตรง แต่มีผลอย่างมากต่อความอ่านง่าย ความเป็นระเบียบ และความสามารถในการดูแลโค้ดในระยะยาว  Ruby อนุญาตให้ใส่ช่องว่างหลายช่องระหว่างส่วนต่างๆ ของโค้ดได้ และตัวแปลภาษาโดยทั่วไปจะเพิกเฉยต่อช่องว่างส่วนใหญ่[1]

อย่างไรก็ตาม การเว้นวรรคในบางตำแหน่งถือเป็นเรื่องจำเป็น เช่น ระหว่างคำสั่งหลักกับ expression หรือระหว่างเมธอดกับอาร์กิวเมนต์ของมัน  ตัวอย่างการเว้นวรรคที่พึงประสงค์และไม่พึงประสงค์:[1]

```ruby
score = 100    # good
score=100      # bad (ยังทำงานได้ แต่ควรหลีกเลี่ยง)
score    =100  # bad

puts "Ready"   # good
puts"Ready"    # bad

puts 789       # works
puts789        # error
```

สามรูปแบบแรกของการประกาศตัวแปรให้ผลลัพธ์ที่เหมือนกัน แต่รูปแบบแรกช่วยให้โค้ดอ่านง่ายที่สุดและเป็นรูปแบบที่มักใช้ในแนวปฏิบัติที่ดี  ส่วนตัวอย่าง `puts789` ไม่สามารถรันได้ เพราะ Ruby จะมองว่าเป็นชื่อเมธอดชุดเดียว ไม่ใช่เมธอด `puts` ตามด้วย literal ตัวเลข[1]

ตัวอย่างเพิ่มเติมสำหรับคำสั่งที่ต้องเว้นวรรค:

```ruby
if user_role == "admin"
  puts "Access granted"
end
```

ควรมีช่องว่างระหว่าง `if` กับ expression ที่ใช้ตรวจสอบเงื่อนไข และระหว่าง `puts` กับอาร์กิวเมนต์ `"Access granted"` เพื่อให้โค้ดอ่านได้ชัดเจน  รูปแบบนี้ช่วยให้แยกแยะส่วนที่เป็นคำสั่งหลักออกจากส่วนที่เป็นค่าหรือ expression ได้อย่างง่ายดาย[1]

## Keywords ในภาษา Ruby

คำว่า keyword ในภาษาโปรแกรมหมายถึง “คำที่ภาษาสำรองไว้ใช้งานเอง” สำหรับควบคุมโครงสร้างและการทำงานของโปรแกรม เช่น การประกาศเมธอด การประกาศคลาส การควบคุมการไหลของโปรแกรม  ใน Ruby ไม่สามารถนำ keyword ไปใช้เป็นชื่อของตัวแปร เมธอด หรือคลาสที่ผู้ใช้กำหนดเองได้ เพราะตัวแปลภาษาจะตีความคำเหล่านี้ตามหน้าที่พิเศษของมัน[1]

ตัวอย่าง keyword ในภาษา Ruby ได้ถูกรวบรวมไว้ในตาราง เช่น `if`, `else`, `elsif`, `end`, `class`, `def`, `module`, `while`, `until`, `true`, `false`, `nil` และคำอื่นๆ ที่ใช้ควบคุมการทำงานของโปรแกรม  นอกจากนั้นยังมี keyword พิเศษอย่าง `__FILE__`, `__LINE__`, และ `__ENCODING__` ที่ให้ข้อมูลเกี่ยวกับไฟล์หรือสถานะของโปรแกรมในขณะรัน[1]

การรู้จักและคุ้นเคยกับ keyword สำคัญเหล่านี้ช่วยให้เขียนโค้ดได้ถูกต้องตามไวยากรณ์ของภาษา Ruby และหลีกเลี่ยงการตั้งชื่อที่ชนกับคำสงวน ซึ่งอาจนำไปสู่ข้อผิดพลาดที่เข้าใจยาก  เมื่อเริ่มเขียนโปรแกรมจริง ควรเปิดลิสต์ keyword ไว้ใกล้ๆ จนกว่าจะจำได้เองว่าคำใดเป็นของภาษาและคำใดสามารถใช้ตั้งชื่อได้[1]

## สรุปภาพรวมของโครงสร้าง Ruby ที่ได้เรียนรู้

ในบทความนี้จึงครอบคลุมหัวข้อสำคัญเกี่ยวกับโครงสร้างพื้นฐานของภาษา Ruby ตั้งแต่โปรแกรมแรกที่พิมพ์ข้อความง่ายๆ, การมองโค้ดในแง่ของ statement และ expression, การใช้คอมเมนต์เพื่ออธิบายโค้ด, การรู้จัก literals ประเภทต่างๆ, การจัดวรรคและช่องว่างให้โค้ดอ่านง่าย ไปจนถึงการทำความเข้าใจคำสงวนหรือ keyword ของภาษา  เมื่อเข้าใจส่วนประกอบเหล่านี้แล้ว การไปต่อในหัวข้ออื่นๆ เช่น ตัวแปร, ประเภทข้อมูล, การรับค่าและแสดงผล, คำสั่งควบคุมเงื่อนไข, วนซ้ำ, เมธอด และโครงสร้างเชิงวัตถุต่างๆ ใน Ruby จะทำได้อย่างเป็นระบบและมั่นใจมากขึ้น[1]

[1](https://marcuscode.com/lang/ruby/program-struct)